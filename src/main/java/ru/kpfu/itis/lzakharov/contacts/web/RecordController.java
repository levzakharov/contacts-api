package ru.kpfu.itis.lzakharov.contacts.web;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import ru.kpfu.itis.lzakharov.contacts.model.Client;import ru.kpfu.itis.lzakharov.contacts.model.Record;import ru.kpfu.itis.lzakharov.contacts.service.ClientService;import ru.kpfu.itis.lzakharov.contacts.service.RecordService;import java.security.Principal;import java.util.List;@RestController(value = "/api")public class RecordController {    @Autowired    ClientService clientService;    @Autowired    RecordService recordService;    @RequestMapping("/api/records")    public List<Record> getAll(Principal principal) {        String username = principal.getName();        return recordService.find(username);    }    @RequestMapping(value = "/api/records", method = RequestMethod.POST)    public Record create(@RequestParam(name = "name") String name,                         @RequestParam(name = "phone") String phone,                         Principal principal) {        String username = principal.getName();        Client client = clientService.find(username);        Record record = new Record();        record.setClient(client);        record.setName(name);        record.setPhone(phone);        return recordService.create(record);    }}